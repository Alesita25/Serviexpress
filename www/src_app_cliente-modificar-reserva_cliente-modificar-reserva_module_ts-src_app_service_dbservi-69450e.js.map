{"version":3,"file":"src_app_cliente-modificar-reserva_cliente-modificar-reserva_module_ts-src_app_service_dbservi-69450e.js","mappings":"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","sources":["./src/app/cliente-modificar-reserva/cliente-modificar-reserva-routing.module.ts","./src/app/cliente-modificar-reserva/cliente-modificar-reserva.module.ts","./src/app/service/dbservice.service.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ClienteModificarReservaPage } from './cliente-modificar-reserva.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ClienteModificarReservaPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ClienteModificarReservaPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ClienteModificarReservaPageRoutingModule } from './cliente-modificar-reserva-routing.module';\n\nimport { ClienteModificarReservaPage } from './cliente-modificar-reserva.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ClienteModificarReservaPageRoutingModule\n  ],\n  declarations: [ClienteModificarReservaPage]\n})\nexport class ClienteModificarReservaPageModule {}\n","import { Injectable } from '@angular/core';\nimport { SQLite, SQLiteObject } from '@awesome-cordova-plugins/sqlite/ngx';\nimport { Platform, ToastController } from '@ionic/angular';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { Reservas } from './reservas';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DbserviceService {\n\n  public database: SQLiteObject;\n\n  tablaReservas: string = \"CREATE TABLE IF NOT EXISTS reserva(id INTEGER PRIMARY KEY autoincrement, servicio VARCHAR(50) NOT NULL, fecha VARCHAR(50) NOT NULL);\";\n  registro: string = \"INSERT or IGNORE INTO reserva(id, servicio, fecha) VALUES (1, 'Titulo noticia', '01-12-2022');\";\n  listaReservas = new BehaviorSubject([]);\n\n  private isDbReady: BehaviorSubject<boolean> = new BehaviorSubject(false);\n  constructor(private sqlite: SQLite, private platform: Platform, public toastController: ToastController) {\n    this.crearBD();\n   }\n\n   addReserva(servicio,fecha){\n    let data=[servicio,fecha];\n    return this.database.executeSql('INSERT INTO reserva(servicio,fecha) VALUES(?,?)',data)\n    .then(res =>{\n      this.buscarReservas();\n    })\n\n  }\n\n  updateReserva(id, servicio, fecha){\n    let data = [servicio, fecha, id];\n    return this.database.executeSql('UPDATE reserva SET servicio = ?, fecha = ? WHERE id = ?', data)\n    .then(data2 =>{\n      this.buscarReservas();\n    })\n\n  }\n\n  deleteReserva(id){\n    return this.database.executeSql('DELETE FROM reserva WHERE id = ?', [id])\n    .then(a =>{\n      this.buscarReservas();\n    })\n  }\n\n  dbState() {\n    return this.isDbReady.asObservable();\n  }\n\n  crearBD() {\n    this.platform.ready().then(() => {\n      this.sqlite.create({\n        name: 'serviexpress.db',\n        location: 'default'\n\n      }).then((db: SQLiteObject) => {\n        this.database = db;\n        this.presentToast(\"BD Creada\");\n        //llamamos a la creaciÃ³n de tablas\n        this.crearTablas();\n      }).catch(e => this.presentToast(e));\n    })\n  }\n\n  async crearTablas() {\n    try {\n      await this.database.executeSql(this.tablaReservas, []);\n      await this.database.executeSql(this.registro, []);\n      this.presentToast(\"Tabla Creada\");\n      this.buscarReservas();\n      this.isDbReady.next(true);\n    } catch (e) {\n      this.presentToast(\"error creartabla \" + e);\n    }\n  }\n\n  buscarReservas() {\n    //this.presentAlert(\"a\");\n    return this.database.executeSql('SELECT * FROM reserva', []).then(res => {\n      let items: Reservas[] = [];\n      //this.presentAlert(\"b\");\n      if (res.rows.length > 0) {\n        //this.presentAlert(\"c\");\n        for (var i = 0; i < res.rows.length; i++) {\n          //this.presentAlert(\"d\");\n          items.push({\n            id: res.rows.item(i).id,\n            servicio: res.rows.item(i).servicio,\n            fecha: res.rows.item(i).fecha\n          });\n        }\n      }\n      //this.presentAlert(\"d\");\n      this.listaReservas.next(items);\n    });\n  }\n\n  fetchReservas(): Observable<Reservas[]> {\n  return this.listaReservas.asObservable();\n  }\n\n  async presentToast(mensaje: string) {\n  const toast = await this.toastController.create({\n    message: mensaje,\n    duration: 3000\n  });\n  toast.present();\n  }\n\n\n\n}\n"],"names":["Injectable","SQLite","Platform","ToastController","BehaviorSubject","DbserviceService","constructor","sqlite","platform","toastController","crearBD","addReserva","servicio","fecha","data","database","executeSql","then","res","buscarReservas","updateReserva","id","data2","deleteReserva","a","dbState","isDbReady","asObservable","ready","create","name","location","db","presentToast","crearTablas","catch","e","tablaReservas","registro","next","items","rows","length","i","push","item","listaReservas","fetchReservas","mensaje","toast","message","duration","present","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}